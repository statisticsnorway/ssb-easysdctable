<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Introduction to 'easySdcTable' • easySdcTable</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Introduction to 'easySdcTable'">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">easySdcTable</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/easySdcTableVignette.html">Introduction to 'easySdcTable'</a></li>
    <li><a class="dropdown-item" href="../articles/singletonsAndZeros.html">The problem of singletons and zeros in 'easySdcTable'</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/statisticsnorway/ssb-easysdctable/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Introduction to 'easySdcTable'</h1>
                        <h4 data-toc-skip class="author">Øyvind
Langsrud</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/statisticsnorway/ssb-easysdctable/blob/master/vignettes/easySdcTableVignette.Rmd" class="external-link"><code>vignettes/easySdcTableVignette.Rmd</code></a></small>
      <div class="d-none name"><code>easySdcTableVignette.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction-and-background">Introduction and background<a class="anchor" aria-label="anchor" href="#introduction-and-background"></a>
</h2>
<p>Below is given an introductory demonstration of the function
ProtectTable() which enables an easy interface to the statistical
disclosure control package ‘sdcTable’ (<a href="https://CRAN.R-project.org/package=sdcTable" class="external-link uri">https://CRAN.R-project.org/package=sdcTable</a>). To see the
input and output to functions in sdcTable consult the function
ProtectTable1() which is an underlying function of ProtectTable(). Note
that ‘easySdcTable’ is not as general as ‘sdcTable’.</p>
<p>This package was originally developed as a part of the modernization
of the production of the key figures on municipal activities in Norway
(<a href="https://www.ssb.no/en/offentlig-sektor/kostra" class="external-link uri">https://www.ssb.no/en/offentlig-sektor/kostra</a>). The
fictitious example data is generated to be similar to realistic data
from Norwegian municipalities and the variable names are (unfortunately)
in Norwegian.</p>
<p>The demonstration below is based on the data from example 2 in the
package and first we will use the unstacked data.</p>
<p>Before demonstrating ProtectTable() a few words about other
possibilities.</p>
<div class="section level3">
<h3 id="maintenance-notice-and-suggested-alternative-added-in-version-1-1-1">Maintenance notice and suggested alternative (added in version
1.1.1)<a class="anchor" aria-label="anchor" href="#maintenance-notice-and-suggested-alternative-added-in-version-1-1-1"></a>
</h3>
<p>This package will be maintained to work, but will not be developed
further. It is limited to handling problems with two linked frequency
tables. For more advanced frequency table problems and for magnitude
tables, the <a href="https://cran.r-project.org/package=GaussSuppression" class="external-link">GaussSuppression
package</a> is recommended.</p>
<p>Also, note that it is important to use easySdcTable’s own method
<code>"Gauss"</code> (default), not sdcTable’s <code>"GAUSS"</code>. See
comparisons at the <a href="https://github.com/statisticsnorway/ssb-easysdctable" class="external-link">GitHub
Repository</a>.</p>
<div class="section level4">
<h4 id="note-after-easysdctable-version-0-8-0">Note after easySdcTable version 0.8.0<a class="anchor" aria-label="anchor" href="#note-after-easysdctable-version-0-8-0"></a>
</h4>
<p>Method <code>"Gauss"</code> has been made default (See NEWS). This is
an additional method that is not available in sdcTable.</p>
</div>
<div class="section level4">
<h4 id="news-in-easysdctable-version-0-9-0">News in easySdcTable version 0.9.0<a class="anchor" aria-label="anchor" href="#news-in-easysdctable-version-0-9-0"></a>
</h4>
<p>Method “Gauss” improved when zeros omitted in input data.</p>
<ul>
<li>A potential pitfall when doing secondary suppression by Gaussian
elimination is cases with <code>protectZeros = TRUE</code> and where
zeros are omitted in input data. The underlying function,
GaussSuppression, produce a warning in such cases (introduced in
SSBtools version 1.2.2) with text: <em>“Suppressed cells with empty
input will not be protected. Extend input data with zeros?”</em>. Cases
where this warning occur is now avoided within ProtectTable. Internally
data are automatically extended when needed.</li>
</ul>
</div>
<div class="section level4">
<h4 id="another-comment-about-gauss-and-zeros-omitted-in-input">Another comment about “Gauss” and zeros omitted in input<a class="anchor" aria-label="anchor" href="#another-comment-about-gauss-and-zeros-omitted-in-input"></a>
</h4>
<p>When hierarchies are supplied as input (parameter
<code>dimList</code>) and when there exist input codes in the
hierarchies that are totally missing in the data, it is still possible
to create a situation with warning: <em>“Suppressed cells with empty
input will not be protected. Extend input data with zeros?”</em>. This
behavior will not be changed. Ignore the warning if such codes represent
structural zeros. If not, extend data with zero frequencies (see
parameter freqVar) so that these code are represented in data.</p>
</div>
</div>
</div>
<div class="section level2">
<h2 id="graphical-user-interface-and-tau-argus">Graphical user interface and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>τ</mi><annotation encoding="application/x-tex">\tau</annotation></semantics></math>-ARGUS<a class="anchor" aria-label="anchor" href="#graphical-user-interface-and-tau-argus"></a>
</h2>
<p>A graphical user interface based on ‘shiny’ can be started by:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/PTgui.html">PTgui</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>To start the gui with example data and catch output:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/PTgui.html">PTgui</a></span><span class="op">(</span>data<span class="op">=</span><span class="fu"><a href="../reference/EasyData.html">EasyData</a></span><span class="op">(</span><span class="st">"z1w"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>To start the gui with possibility to run tau-argus:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">exeArgus</span> <span class="op">&lt;-</span> <span class="st">"C:/Tau/TauArgus4.1.4/TauArgus.exe"</span> <span class="co"># Tau-argus executable </span></span>
<span><span class="va">pathArgus</span> <span class="op">&lt;-</span> <span class="st">"C:/Users/nnn/Documents"</span> <span class="co"># Folder for (temporary) tau-argus files</span></span>
<span><span class="fu"><a href="../reference/PTgui.html">PTgui</a></span><span class="op">(</span>exeArgus<span class="op">=</span><span class="va">exeArgus</span>, pathArgus<span class="op">=</span><span class="va">pathArgus</span><span class="op">)</span> </span></code></pre></div>
<p>The interface to tau-argus make use of functionality in ‘sdcTable’.
See the documentation of ProtectTable() for more information.</p>
</div>
<div class="section level2">
<h2 id="unstacked-data">Unstacked data<a class="anchor" aria-label="anchor" href="#unstacked-data"></a>
</h2>
<div class="section level4">
<h4 id="the-input-data">The input data<a class="anchor" aria-label="anchor" href="#the-input-data"></a>
</h4>
<p>The function EasyData() in ‘easySdcTable’ returns example data.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">z2w</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/EasyData.html">EasyData</a></span><span class="op">(</span><span class="st">"z2w"</span><span class="op">)</span> </span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">z2w</span>, row.names<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<pre><code> region fylke kostragr annet arbeid soshjelp trygd
      A     1      300    11     11       55    36
      B     4      300     7      1       29    18
      C     5      300     5      8       35    25
      D     5      300    13      2       17    13
      E     6      300     9     14       63    52
      F     6      300    12      9       24    22
      G     8      300     6      4       22     8
      H     8      300     9      3       38    15
      I     1      400     3      0        9     2
      J    10      400     9      0       32    20
      K    10      400     4      2       18    11</code></pre>
<p>By unstacked data we mean that counts (cell frequencies) are in more
than a single column.</p>
</div>
<div class="section level4">
<h4 id="running-protecttable">Running ProtectTable<a class="anchor" aria-label="anchor" href="#running-protecttable"></a>
</h4>
<p>In this case we have counts in columns four to seven. Using the
dimensional variable in the first column we can run ProtectTable by:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ex2w</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ProtectTable.html">ProtectTable</a></span><span class="op">(</span><span class="va">z2w</span>,<span class="fl">1</span>,<span class="fl">4</span><span class="op">:</span><span class="fl">7</span><span class="op">)</span> </span></code></pre></div>
</div>
<div class="section level4">
<h4 id="the-data-with-computed-totals">The data with computed totals<a class="anchor" aria-label="anchor" href="#the-data-with-computed-totals"></a>
</h4>
<p>The output element <em>freq</em> contains the data with computed
totals.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">ex2w</span><span class="op">$</span><span class="va">freq</span>, row.names<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<pre><code> region annet arbeid soshjelp trygd Total
      A    11     11       55    36   113
      B     7      1       29    18    55
      C     5      8       35    25    73
      D    13      2       17    13    45
      E     9     14       63    52   138
      F    12      9       24    22    67
      G     6      4       22     8    40
      H     9      3       38    15    65
      I     3      0        9     2    14
      J     9      0       32    20    61
      K     4      2       18    11    35
  Total    88     54      342   222   706</code></pre>
</div>
<div class="section level4">
<h4 id="sdcstatus">SdcStatus<a class="anchor" aria-label="anchor" href="#sdcstatus"></a>
</h4>
<p>In the output element <em>sdcStatus</em> the cells are coded as “u”
(primary suppressed), “x” (secondary suppression), and “s” (can be
published).</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">ex2w</span><span class="op">$</span><span class="va">sdcStatus</span>, row.names<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<pre><code> region annet arbeid soshjelp trygd Total
      A     s      s        s     s     s
      B     x      u        s     s     s
      C     s      s        s     s     s
      D     x      u        s     s     s
      E     s      s        s     s     s
      F     s      s        s     s     s
      G     s      x        s     x     s
      H     x      u        s     s     s
      I     u      u        s     u     s
      J     x      u        s     s     s
      K     x      u        s     s     s
  Total     s      s        s     s     s</code></pre>
</div>
<div class="section level4">
<h4 id="suppressed-data">Suppressed data<a class="anchor" aria-label="anchor" href="#suppressed-data"></a>
</h4>
<p>The output element <em>suppressed</em> is the same as <em>freq</em>
with the exception that suppressed cells (“u” and “x”) are set to
missing (NA).</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">ex2w</span><span class="op">$</span><span class="va">suppressed</span>, row.names<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<pre><code> region annet arbeid soshjelp trygd Total
      A    11     11       55    36   113
      B    NA     NA       29    18    55
      C     5      8       35    25    73
      D    NA     NA       17    13    45
      E     9     14       63    52   138
      F    12      9       24    22    67
      G     6     NA       22    NA    40
      H    NA     NA       38    15    65
      I    NA     NA        9    NA    14
      J    NA     NA       32    20    61
      K    NA     NA       18    11    35
  Total    88     54      342   222   706</code></pre>
</div>
<div class="section level4">
<h4 id="using-named-input-and-the-hitas-method">Using named input and the HITAS method<a class="anchor" aria-label="anchor" href="#using-named-input-and-the-hitas-method"></a>
</h4>
<p>Now we specify the variables using names instead of numbers.
Furthermore we use the “HITAS” method. The default method is
“SIMPLEHEURISTIC” and other possibilities are “OPT” and “HYPERCUBE”. The
latter is not possible in cases with two linked tables.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ex2wHITAS</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ProtectTable.html">ProtectTable</a></span><span class="op">(</span><span class="va">z2w</span>,dimVar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"region"</span><span class="op">)</span>,freqVar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"annet"</span>, <span class="st">"arbeid"</span>, <span class="st">"soshjelp"</span>, <span class="st">"trygd"</span><span class="op">)</span>, method<span class="op">=</span><span class="st">"HITAS"</span><span class="op">)</span>  </span></code></pre></div>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">ex2wHITAS</span><span class="op">$</span><span class="va">suppressed</span>, row.names<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<pre><code> region annet arbeid soshjelp trygd Total
      A    11     11       55    36   113
      B    NA     NA       29    18    55
      C     5      8       35    25    73
      D    NA     NA       17    13    45
      E     9     14       63    52   138
      F    12      9       24    22    67
      G     6      4       22     8    40
      H    NA     NA       38    15    65
      I    NA     NA        9    NA    14
      J    NA     NA       32    20    61
      K    NA     NA       18    NA    35
  Total    88     54      342   222   706</code></pre>
</div>
<div class="section level4">
<h4 id="more-advanced-use-of-protecttable">More advanced use of ProtectTable<a class="anchor" aria-label="anchor" href="#more-advanced-use-of-protecttable"></a>
</h4>
<p>Here we include the tree first variables as dimensional variables. It
will be detected automatically that “fylke” and “kostragr” are
hierarchically related to “region” and that they are not hierarchically
related to each other. Zeros will not be suppressed and we will only
primarily suppress ones and twos.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ex2wAdvanced</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ProtectTable.html">ProtectTable</a></span><span class="op">(</span><span class="va">z2w</span>,dimVar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"region"</span>, <span class="st">"fylke"</span>,<span class="st">"kostragr"</span><span class="op">)</span>,freqVar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"annet"</span>, <span class="st">"arbeid"</span>, <span class="st">"soshjelp"</span>, <span class="st">"trygd"</span><span class="op">)</span>, maxN<span class="op">=</span><span class="fl">2</span>, protectZeros<span class="op">=</span><span class="cn">FALSE</span>, method <span class="op">=</span> <span class="st">"SIMPLEHEURISTIC"</span>, addName<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>  </span></code></pre></div>
</div>
<div class="section level4">
<h4 id="suppressed-data-with-totals-and-sub-totals">Suppressed data with totals and sub-totals<a class="anchor" aria-label="anchor" href="#suppressed-data-with-totals-and-sub-totals"></a>
</h4>
<p>Now the output data will contain sub-totals of the additional
variables and the secondary suppression has taken those sub-totals into
account. Since addName is TRUE, sub-totals are named using “fylke” and
“kostragr”.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">ex2wAdvanced</span><span class="op">$</span><span class="va">suppressed</span>, row.names<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<pre><code>       region annet arbeid soshjelp trygd Total
            A    NA     11       55    NA   113
            B    NA     NA       29    NA    55
            C    NA     NA       35    25    73
            D    NA     NA       17    13    45
            E     9     14       63    52   138
            F    12      9       24    22    67
            G     6     NA       22    NA    40
            H     9     NA       38    NA    65
            I    NA      0        9    NA    14
            J     9      0       32    20    61
            K    NA     NA       18    NA    35
      fylke_1    14     11       64    38   127
      fylke_4    NA     NA       29    NA    55
      fylke_5    18     10       52    38   118
      fylke_6    21     23       87    74   205
      fylke_8    15      7       60    23   105
     fylke_10    NA     NA       50    NA    96
 kostragr_300    NA     NA      283   189   596
 kostragr_400    NA     NA       59    33   110
        Total    88     54      342   222   706</code></pre>
</div>
<div class="section level4">
<h4 id="info">Info<a class="anchor" aria-label="anchor" href="#info"></a>
</h4>
<p>The output element <em>info</em> contains three parts.</p>
<ol style="list-style-type: decimal">
<li><p>Since we have unstacked data an extra variable, named
<em>var1</em>, is created. How the categories of this variable are
related to the variable names are described. Here these categories are
simply the variable names. In more advanced cases it is possible that
more than a single variable are created from the variable
names.</p></li>
<li><p>Secondly, it is described how the tables(s) are created from the
variables. In this case the problem is solved using two linked tables.
The first table involves “fylke” and the second table involves
“kostragr”.</p></li>
<li><p>The last part contains summary output for each of the two linked
tables.</p></li>
</ol>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/prmatrix.html" class="external-link">prmatrix</a></span><span class="op">(</span><span class="va">ex2wAdvanced</span><span class="op">$</span><span class="va">info</span>,rowlab<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">""</span>,<span class="fl">99</span><span class="op">)</span>,collab<span class="op">=</span><span class="st">""</span>,quote<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<pre><code>                                                                            
              var1                                                          
 annet       annet                                                          
 arbeid     arbeid                                                          
 soshjelp soshjelp                                                          
 trygd       trygd                                                          
 ==========                                                                 
          Variables Table1 Table2                                           
 1    region, fylke      1      0                                           
 2 region, kostragr      0      1                                           
 3             var1      1      1                                           
 ==========                                                                 
 Classes 'safeObj', 'data.table' and 'data.frame':\t90 obs. of  4 variables:
  $ region   : chr  "Total" "Total" "Total" "Total" ...                     
  $ var1     : chr  "Total" "annet" "arbeid" "soshjelp" ...                 
  $ Freq     : num  706 88 54 342 222 127 14 11 64 38 ...                   
  $ sdcStatus: chr  "s" "s" "s" "s" ...                                     
  - attr(*, ".internal.selfref")=&lt;externalptr&gt;                              
 NULL                                                                       
 ==========                                                                 
 Classes 'safeObj', 'data.table' and 'data.frame':\t70 obs. of  4 variables:
  $ region   : chr  "Total" "Total" "Total" "Total" ...                     
  $ var1     : chr  "Total" "annet" "arbeid" "soshjelp" ...                 
  $ Freq     : num  706 88 54 342 222 596 72 52 283 189 ...                 
  $ sdcStatus: chr  "s" "s" "s" "s" ...                                     
  - attr(*, ".internal.selfref")=&lt;externalptr&gt;                              
 NULL                                                                       </code></pre>
</div>
</div>
<div class="section level2">
<h2 id="stacked-data">Stacked data<a class="anchor" aria-label="anchor" href="#stacked-data"></a>
</h2>
<p>Now we will use a stacked variant of the same data. A single column
(“ant”) holds cell counts and the variable “hovedint” contains the four
categories “annet”, “arbeid”, “soshjelp” and “trygd”.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">z2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/EasyData.html">EasyData</a></span><span class="op">(</span><span class="st">"z2"</span><span class="op">)</span> </span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">z2</span><span class="op">)</span></span></code></pre></div>
<pre><code>   region fylke kostragr hovedint ant
1       A     1      300    annet  11
2       B     4      300    annet   7
3       C     5      300    annet   5
4       D     5      300    annet  13
5       E     6      300    annet   9
6       F     6      300    annet  12
7       G     8      300    annet   6
8       H     8      300    annet   9
9       I     1      400    annet   3
10      J    10      400    annet   9
11      K    10      400    annet   4
12      A     1      300   arbeid  11
13      B     4      300   arbeid   1
14      C     5      300   arbeid   8
15      D     5      300   arbeid   2
16      E     6      300   arbeid  14
17      F     6      300   arbeid   9
18      G     8      300   arbeid   4
19      H     8      300   arbeid   3
20      I     1      400   arbeid   0
21      J    10      400   arbeid   0
22      K    10      400   arbeid   2
23      A     1      300 soshjelp  55
24      B     4      300 soshjelp  29
25      C     5      300 soshjelp  35
26      D     5      300 soshjelp  17
27      E     6      300 soshjelp  63
28      F     6      300 soshjelp  24
29      G     8      300 soshjelp  22
30      H     8      300 soshjelp  38
31      I     1      400 soshjelp   9
32      J    10      400 soshjelp  32
33      K    10      400 soshjelp  18
34      A     1      300    trygd  36
35      B     4      300    trygd  18
36      C     5      300    trygd  25
37      D     5      300    trygd  13
38      E     6      300    trygd  52
39      F     6      300    trygd  22
40      G     8      300    trygd   8
41      H     8      300    trygd  15
42      I     1      400    trygd   2
43      J    10      400    trygd  20
44      K    10      400    trygd  11</code></pre>
<p>We run ProtectTable with stacked data the same way as with unstacked
data.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ex2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ProtectTable.html">ProtectTable</a></span><span class="op">(</span><span class="va">z2</span>,dimVar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"region"</span>, <span class="st">"hovedint"</span>, <span class="st">"kostragr"</span><span class="op">)</span>, freqVar <span class="op">=</span> <span class="st">"ant"</span><span class="op">)</span> </span></code></pre></div>
<p>Instead of three output elements we now have the single element
<em>data</em>:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">ex2</span><span class="op">$</span><span class="va">data</span><span class="op">)</span></span></code></pre></div>
<pre><code>   region hovedint freq sdcStatus suppressed
1       A    annet   11         s         11
2       B    annet    7         x         NA
3       C    annet    5         s          5
4       D    annet   13         x         NA
5       E    annet    9         s          9
6       F    annet   12         s         12
7       G    annet    6         s          6
8       H    annet    9         x         NA
9       I    annet    3         u         NA
10      J    annet    9         x         NA
11      K    annet    4         s          4
12      A   arbeid   11         s         11
13      B   arbeid    1         u         NA
14      C   arbeid    8         s          8
15      D   arbeid    2         u         NA
16      E   arbeid   14         s         14
17      F   arbeid    9         s          9
18      G   arbeid    4         s          4
19      H   arbeid    3         u         NA
20      I   arbeid    0         u         NA
21      J   arbeid    0         u         NA
22      K   arbeid    2         u         NA
23      A soshjelp   55         s         55
24      B soshjelp   29         s         29
25      C soshjelp   35         s         35
26      D soshjelp   17         s         17
27      E soshjelp   63         s         63
28      F soshjelp   24         s         24
29      G soshjelp   22         s         22
30      H soshjelp   38         s         38
31      I soshjelp    9         s          9
32      J soshjelp   32         s         32
33      K soshjelp   18         s         18
34      A    trygd   36         s         36
35      B    trygd   18         s         18
36      C    trygd   25         s         25
37      D    trygd   13         s         13
38      E    trygd   52         s         52
39      F    trygd   22         s         22
40      G    trygd    8         s          8
41      H    trygd   15         s         15
42      I    trygd    2         u         NA
43      J    trygd   20         s         20
44      K    trygd   11         x         NA
45      A    Total  113         s        113
46      B    Total   55         s         55
47      C    Total   73         s         73
48      D    Total   45         s         45
49      E    Total  138         s        138
50      F    Total   67         s         67
51      G    Total   40         s         40
52      H    Total   65         s         65
53      I    Total   14         s         14
54      J    Total   61         s         61
55      K    Total   35         s         35
56    300    annet   72         x         NA
57    300   arbeid   52         x         NA
58    300 soshjelp  283         s        283
59    300    trygd  189         s        189
60    300    Total  596         s        596
61    400    annet   16         x         NA
62    400   arbeid    2         u         NA
63    400 soshjelp   59         s         59
64    400    trygd   33         s         33
65    400    Total  110         s        110
66  Total    annet   88         s         88
67  Total   arbeid   54         s         54
68  Total soshjelp  342         s        342
69  Total    trygd  222         s        222
70  Total    Total  706         s        706</code></pre>
<p>Unlike above addName is FALSE (default) and therefore the sub-totals
“300” and “400” are written without “kostragr”.</p>
</div>
<div class="section level2">
<h2 id="assuming-micro-data">Assuming micro data<a class="anchor" aria-label="anchor" href="#assuming-micro-data"></a>
</h2>
<p>Below no columns holds cell counts (no freqVar input) and therefore
it is assumed that each cell count is one. For this data set this is not
realistic, but in other cases rows are replicated.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ex2micro</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ProtectTable.html">ProtectTable</a></span><span class="op">(</span><span class="va">z2</span>,dimVar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"region"</span>, <span class="st">"hovedint"</span>, <span class="st">"kostragr"</span><span class="op">)</span><span class="op">)</span> </span></code></pre></div>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">ex2micro</span><span class="op">$</span><span class="va">data</span><span class="op">)</span></span></code></pre></div>
<pre><code>   region hovedint freq sdcStatus suppressed
1       A    annet    1         u         NA
2       B    annet    1         u         NA
3       C    annet    1         u         NA
4       D    annet    1         u         NA
5       E    annet    1         u         NA
6       F    annet    1         u         NA
7       G    annet    1         u         NA
8       H    annet    1         u         NA
9       I    annet    1         u         NA
10      J    annet    1         u         NA
11      K    annet    1         u         NA
12      A   arbeid    1         u         NA
13      B   arbeid    1         u         NA
14      C   arbeid    1         u         NA
15      D   arbeid    1         u         NA
16      E   arbeid    1         u         NA
17      F   arbeid    1         u         NA
18      G   arbeid    1         u         NA
19      H   arbeid    1         u         NA
20      I   arbeid    1         u         NA
21      J   arbeid    1         u         NA
22      K   arbeid    1         u         NA
23      A soshjelp    1         u         NA
24      B soshjelp    1         u         NA
25      C soshjelp    1         u         NA
26      D soshjelp    1         u         NA
27      E soshjelp    1         u         NA
28      F soshjelp    1         u         NA
29      G soshjelp    1         u         NA
30      H soshjelp    1         u         NA
31      I soshjelp    1         u         NA
32      J soshjelp    1         u         NA
33      K soshjelp    1         u         NA
34      A    trygd    1         u         NA
35      B    trygd    1         u         NA
36      C    trygd    1         u         NA
37      D    trygd    1         u         NA
38      E    trygd    1         u         NA
39      F    trygd    1         u         NA
40      G    trygd    1         u         NA
41      H    trygd    1         u         NA
42      I    trygd    1         u         NA
43      J    trygd    1         u         NA
44      K    trygd    1         u         NA
45      A    Total    4         s          4
46      B    Total    4         s          4
47      C    Total    4         s          4
48      D    Total    4         s          4
49      E    Total    4         s          4
50      F    Total    4         s          4
51      G    Total    4         s          4
52      H    Total    4         s          4
53      I    Total    4         s          4
54      J    Total    4         s          4
55      K    Total    4         s          4
56    300    annet    8         x         NA
57    300   arbeid    8         x         NA
58    300 soshjelp    8         x         NA
59    300    trygd    8         x         NA
60    300    Total   32         s         32
61    400    annet    3         u         NA
62    400   arbeid    3         u         NA
63    400 soshjelp    3         u         NA
64    400    trygd    3         u         NA
65    400    Total   12         s         12
66  Total    annet   11         s         11
67  Total   arbeid   11         s         11
68  Total soshjelp   11         s         11
69  Total    trygd   11         s         11
70  Total    Total   44         s         44</code></pre>
<p>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Øyvind Langsrud.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
